function AlexAlertBox(t){this.init(t)}function AlexMusicBox(t){this.init(t)}AlexAlertBox.prototype={alertTemplate:['<div class="popBox" id="alertBox">','<div class="alertBoxMarginTop" id="alertBoxMarginTop"></div>','<div class="alertText" id="alertText">','<div id="alertBoxText"></div>','<button onclick="javascript:$(this).parent().parent().remove();" type="button">关闭</button>',"</div>","</div>"].join(""),init:function(t){},getAlertHtml:function(){$("body").append(this.alertTemplate)},alertBox:function(t){this.getAlertHtml(),$("#alertBoxText").html(t),$("#alertBox").fadeIn(500),$("#alertBoxMarginTop").height(($(window).height()-$("#alertText").height())/2-30)}};var alertFun=new AlexAlertBox;AlexMusicBox.prototype={musicTemplate:['<div id="musicMenu" class="musicMenu">','<audio id="Jaudio" class="media-audio" preload loop="loop">','<source src="{mp3}" type="audio/mpeg">',"</audio>",'<div class="control">','<div class="control-after"></div>',"</div>","</div>"].join(""),init:function(t){var i=this;this.musicMp3=t.music,this.getMusicHtml(),this.audio=document.getElementById("Jaudio"),this.musicPlay=!1,$("#musicMenu").click(function(){i.musicPlay?(console.log("music Off"),i.audio.pause(),$("#musicMenu .control").removeClass("show_loop"),i.musicPlay=!1):(console.log("music On"),i.audioAutoPlay())}),this.audioAutoPlay("Jaudio")},getMusicHtml:function(){obj={mp3:this.musicMp3},$("body").append(this.substitute(this.musicTemplate,obj))},audioAutoPlay:function(){var t=this;$("#musicMenu .control").addClass("show_loop"),this.musicPlay=!0;var i=function(){t.audio.play(),document.removeEventListener("touchstart",i,!1)};this.audio.play(),document.addEventListener("WeixinJSBridgeReady",function(){i()},!1),document.addEventListener("YixinJSBridgeReady",function(){i()},!1),document.addEventListener("touchstart",i,!1)},substitute:function(t,i){return t.replace(/\\?\{([^}]+)\}/g,function(t,e){return"\\"==t.charAt(0)?t.slice(1):void 0!=i[e]?i[e]:""})}},$(function(t){document.addEventListener("touchmove",function(t){t.preventDefault()},!1);new AlexMusicBox({music:musicMp3})});